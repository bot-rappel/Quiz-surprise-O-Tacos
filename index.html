<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz O'Tacos - Groupe AMAUH</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; background: linear-gradient(135deg, #f97316 0%, #dc2626 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .card { background: white; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); padding: 30px; margin-bottom: 20px; }
        h1 { color: #f97316; font-size: 2.5em; text-align: center; margin-bottom: 10px; }
        h2 { color: #1f2937; font-size: 1.8em; margin-bottom: 20px; }
        h3 { color: #374151; font-size: 1.3em; margin-bottom: 15px; }
        .subtitle { text-align: center; color: #6b7280; margin-bottom: 30px; }
        .form-group { margin-bottom: 20px; }
        label { display: block; font-weight: 600; color: #374151; margin-bottom: 8px; font-size: 0.9em; }
        input, select { width: 100%; padding: 12px; border: 2px solid #d1d5db; border-radius: 8px; font-size: 1em; }
        input:focus, select:focus { outline: none; border-color: #f97316; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .btn { padding: 12px 24px; border: none; border-radius: 8px; font-size: 1em; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: linear-gradient(135deg, #f97316, #dc2626); color: white; width: 100%; padding: 16px; font-size: 1.1em; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(249, 115, 22, 0.4); }
        .btn-secondary { background: #6b7280; color: white; }
        .btn-secondary:hover { background: #4b5563; }
        .btn-small { padding: 8px 16px; font-size: 0.9em; }
        .quiz-size { background: #fff7ed; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .size-options { display: flex; gap: 12px; flex-wrap: wrap; }
        .size-btn { padding: 12px 24px; border: 2px solid #fed7aa; background: white; color: #9a3412; border-radius: 8px; font-weight: 600; cursor: pointer; }
        .size-btn.active { background: #f97316; color: white; border-color: #f97316; }
        .option-btn { width: 100%; text-align: left; padding: 16px; margin-bottom: 12px; border: 2px solid #e5e7eb; background: white; border-radius: 8px; font-size: 1em; cursor: pointer; transition: all 0.2s; }
        .option-btn:hover { border-color: #f97316; background: #fff7ed; }
        .option-letter { display: inline-block; width: 32px; height: 32px; background: #fff7ed; color: #f97316; border-radius: 50%; text-align: center; line-height: 32px; font-weight: bold; margin-right: 12px; }
        .progress-bar { width: 100%; height: 8px; background: #e5e7eb; border-radius: 4px; overflow: hidden; margin-bottom: 20px; }
        .progress-fill { height: 100%; background: #f97316; transition: width 0.3s; }
        .result-card { border-left: 4px solid #10b981; padding: 16px; margin-bottom: 12px; border-radius: 8px; }
        .result-card.wrong { border-left-color: #ef4444; background: #fef2f2; }
        .result-card.correct { background: #f0fdf4; }
        .score-display { background: linear-gradient(135deg, #f97316, #dc2626); color: white; padding: 40px; border-radius: 12px; text-align: center; margin-bottom: 30px; }
        .score-number { font-size: 4em; font-weight: bold; margin-bottom: 10px; }
        .icon-card { text-align: center; padding: 30px; background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); cursor: pointer; transition: all 0.3s; }
        .icon-card:hover { transform: translateY(-5px); box-shadow: 0 5px 20px rgba(0,0,0,0.15); }
        .icon { font-size: 3em; margin-bottom: 10px; }
        .hidden { display: none; }
        .question-list { max-height: 400px; overflow-y: auto; }
        .question-item { border: 1px solid #e5e7eb; padding: 16px; border-radius: 8px; margin-bottom: 12px; }
        .flex-between { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px; }
        .text-success { color: #10b981; font-weight: 600; }
        .text-small { font-size: 0.9em; color: #6b7280; }
        @media (max-width: 768px) { h1 { font-size: 2em; } .size-options { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container" id="app"></div>

    <script>
        const questions = [
            { question: "Quelle est la temp√©rature minimale requise pour le lavage des mains dans un restaurant O'Tacos ?", options: ["38¬∞C", "25¬∞C", "42¬∞C", "50¬∞C"], answer: "38¬∞C" },
            { question: "Qu'est-ce qui est strictement interdit en cuisine selon le manuel de O'Tacos ?", options: ["Torchons et √©ponges", "Ustensiles en plastique", "Serviettes en papier", "Crayons alimentaires"], answer: "Torchons et √©ponges" },
            { question: "Quelle est la taille maximale du O'tacos propos√©e chez O'Tacos ?", options: ["M", "L", "XL", "Gigatacos"], answer: "Gigatacos" },
            { question: "Quel est le taux de compos√©s polaires √† ne pas d√©passer dans l'huile de friture ?", options: ["23%", "14%", "10%", "30%"], answer: "23%" },
            { question: "Combien de fois par jour doit-on contr√¥ler la temp√©rature des chambres froides ?", options: ["Une fois par jour", "Deux fois par jour", "Trois fois par jour", "Toutes les heures"], answer: "Deux fois par jour" },
            { question: "Combien de temps maximum un produit d√©congel√© peut-il √™tre conserv√© au froid positif ?", options: ["24 heures", "48 heures", "72 heures", "96 heures"], answer: "72 heures" },
            { question: "Quel ingr√©dient est unique dans les O'tacos propos√©s par O'Tacos ?", options: ["Sauce barbecue", "Sauce fromag√®re", "Moutarde", "Sauce ketchup"], answer: "Sauce fromag√®re" },
            { question: "Quel est le d√©lai maximal entre la prise de commande et la livraison d'un O'tacos ?", options: ["2 minutes", "4 minutes", "6 minutes", "8 minutes"], answer: "4 minutes" },
            { question: "Comment les produits doivent-ils √™tre √©tiquet√©s apr√®s d√©cong√©lation ?", options: ["Avec la date d'√©tiquetage", "Avec la date limite uniquement", "Avec date et heure d√©cong√©lation et fin", "Avec le nom uniquement"], answer: "Avec date et heure d√©cong√©lation et fin" },
            { question: "Quel appareil est utilis√© pour mesurer la qualit√© de l'huile de friture ?", options: ["Thermom√®tre √† sonde", "Thermo-hygrom√®tre", "Le testo 270", "Tensiom√®tre"], answer: "Le testo 270" },
            { question: "Quel est l'un des quatre crit√®res fondamentaux pour la satisfaction du client ?", options: ["La rapidit√© du service", "L'offre de boissons", "La vari√©t√© des desserts", "L'ambiance musicale"], answer: "La rapidit√© du service" },
            { question: "Quelle est la temp√©rature minimale √† coeur pour conserver les produits chauds cuits ?", options: ["55¬∞C", "60¬∞C", "65¬∞C", "70¬∞C"], answer: "65¬∞C" },
            { question: "Que doit-on faire en cas de d√©tection de nuisibles ?", options: ["Noter dans cahier", "Contacter soci√©t√© sp√©cialis√©e", "Fermer 24 heures", "D√©placer produits"], answer: "Contacter soci√©t√© sp√©cialis√©e" },
            { question: "Quelle est la fr√©quence recommand√©e pour le nettoyage des machines √† milk-shake ?", options: ["Une fois par semaine", "Deux fois par semaine", "Tous les jours", "Une fois par mois"], answer: "Tous les jours" },
            { question: "Que faut-il faire si un produit a d√©pass√© sa date limite ?", options: ["Noter et conserver", "Noter et jeter imm√©diatement", "Changer √©tiquette", "Le congeler"], answer: "Noter et jeter imm√©diatement" },
            { question: "Quelle proc√©dure pour √©viter la contamination crois√©e ?", options: ["M√™me mat√©riel pour tous", "Manipuler s√©par√©ment crus et cuits", "Laver mains toutes heures", "M√©langer produits"], answer: "Manipuler s√©par√©ment crus et cuits" },
            { question: "Quelle taille O'tacos peut √™tre vendue en version sucr√©e ?", options: ["M", "L", "XL", "O'mignon"], answer: "O'mignon" },
            { question: "Comment stocker les suppl√©ments congel√©s ?", options: ["Temp√©rature ambiante", "Au froid positif", "Au froid n√©gatif", "Sur √©tag√®res"], answer: "Au froid n√©gatif" },
            { question: "Crit√®re primordial lors du choix d'un fournisseur ?", options: ["Prix produits", "Proximit√©", "R√©f√©rencement O'Tacos", "Disponibilit√© imm√©diate"], answer: "R√©f√©rencement O'Tacos" },
            { question: "R√®gle concernant les t√©l√©phones portables en cuisine ?", options: ["Autoris√©s si propres", "Rang√©s zone sp√©cifique", "Que pendant pauses", "Strictement interdits"], answer: "Strictement interdits" },
            { question: "Comment traiter la zone propre ?", options: ["Stockage temporaire", "Zone sale jusqu'au nettoyage", "Zone √† ne pas franchir par produits sales", "Entreposage d√©chets"], answer: "Zone √† ne pas franchir par produits sales" },
            { question: "Temps d'attente avant mesurer qualit√© huile apr√®s cuisson ?", options: ["Imm√©diatement", "1 minute", "5 minutes", "10 minutes"], answer: "5 minutes" },
            { question: "Quantit√© de combinaisons possibles de O'Tacos ?", options: ["100000", "80000", "50000", "20000"], answer: "80000" },
            { question: "Comment conserver la sauce fromag√®re pr√©par√©e ?", options: ["Temp√©rature ambiante", "Froid n√©gatif", "√âtuve maintien chaud", "Cong√©lateur"], answer: "√âtuve maintien chaud" },
            { question: "Que faire en cas de panne d'√©lectricit√© ?", options: ["Continuer servir", "Fermer temporairement", "Appeler technicien continuer", "Utiliser g√©n√©rateurs"], answer: "Fermer temporairement" },
            { question: "Quelles viandes sont cuites au four ?", options: ["Cordons bleus et nuggets", "Viande hach√©e et poulet", "Poulet pan√© et frites", "Merguez et jalape√±os"], answer: "Viande hach√©e et poulet" },
            { question: "Proc√©dure pour le nettoyage des surfaces en cuisine ?", options: ["Eau froide", "Torchons r√©utilisables", "Suivre plan nettoyage d√©fini", "√âponge chaque surface"], answer: "Suivre plan nettoyage d√©fini" },
            { question: "Temps d'attente maximum client avant recevoir O'tacos ?", options: ["2 minutes", "4 minutes", "6 minutes", "8 minutes"], answer: "4 minutes" },
            { question: "Temp√©rature minimale lors de la cuisson des viandes ?", options: ["50¬∞C", "60¬∞C", "65¬∞C", "70¬∞C"], answer: "65¬∞C" },
            { question: "Que signifie marche en avant ?", options: ["Suivre instructions client", "S√©parer crus et cuits", "Organiser flux du propre vers le sale", "Manipuler avec pr√©caution"], answer: "Organiser flux du propre vers le sale" },
            { question: "Combien de tailles de O'Tacos disponibles ?", options: ["3 tailles", "4 tailles", "5 tailles", "6 tailles"], answer: "5 tailles" },
            { question: "Boisson non incluse dans les menus ?", options: ["Coca-Cola", "Fanta", "Jus de pomme", "O'Shake"], answer: "Jus de pomme" },
            { question: "Premi√®re √©tape du syst√®me HACCP ?", options: ["Fixer seuil danger", "Cr√©er dossier", "Analyser dangers existants", "Contr√¥ler temp√©rature"], answer: "Analyser dangers existants" },
            { question: "Dur√©e maximale viandes cuites dans √©tuve ?", options: ["1 heure", "2 heures", "4 heures", "6 heures"], answer: "2 heures" },
            { question: "Appareil pour v√©rifier temp√©rature produits surgel√©s ?", options: ["Thermom√®tre dilatation", "Thermom√®tre √† sonde", "Testo 270", "Chronom√®tre"], answer: "Thermom√®tre √† sonde" },
            { question: "Zone du restaurant consid√©r√©e comme propre ?", options: ["Comptoir", "R√©serve", "Cuisine", "Toilettes"], answer: "Cuisine" },
            { question: "R√©action si temp√©rature produit non conforme ?", options: ["Continuer cuisson", "Noter erreur", "Actions correctives imm√©diatement", "Ne pas tenir compte"], answer: "Actions correctives imm√©diatement" },
            { question: "Dur√©e maximale conservation frites apr√®s cuisson ?", options: ["10 minutes", "20 minutes", "30 minutes", "40 minutes"], answer: "30 minutes" },
            { question: "Comment pr√©parer la sauce fromag√®re ?", options: ["M√©lang√©e √† froid", "R√©chauff√©e dans √©tuve", "Cuite friteuse", "Servie temp√©rature ambiante"], answer: "R√©chauff√©e dans √©tuve" },
            { question: "Ingr√©dients jamais utilis√©s dans O'tacos sucr√© ?", options: ["Sauce chocolat", "Viande hach√©e", "Fruits", "Sauce caramel"], answer: "Viande hach√©e" },
            { question: "Que faire si probl√®me hygi√®ne observ√© ?", options: ["Ignorer", "Signaler manager imm√©diatement", "Attendre fin journ√©e", "Corriger seul"], answer: "Signaler manager imm√©diatement" }
        ];

        const restaurants = ['Louvain-La-Neuve', 'Auderghem', 'Uccle', 'Halle', 'Soignies', 'Ath', 'Renaix', 'Mouscron'];

        let state = {
            view: 'home',
            employeeName: '',
            restaurant: '',
            quizSize: 10,
            currentQuiz: [],
            currentQuestion: 0,
            answers: [],
            history: JSON.parse(localStorage.getItem('otacos-history') || '[]')
        };

        function render() {
            const app = document.getElementById('app');
            if (state.view === 'home') app.innerHTML = renderHome();
            else if (state.view === 'quiz') app.innerHTML = renderQuiz();
            else if (state.view === 'results') app.innerHTML = renderResults();
            else if (state.view === 'history') app.innerHTML = renderHistory();
        }

        function renderHome() {
            return `
                <div class="card">
                    <h1>üåÆ Quiz O'Tacos</h1>
                    <p class="subtitle">Groupe AMAUH - Contr√¥le des connaissances terrain</p>
                    
                    <div class="grid">
                        <div class="form-group">
                            <label>Nom de l'√©quipier</label>
                            <input type="text" id="employeeName" placeholder="Pr√©nom Nom" value="${state.employeeName}">
                        </div>
                        <div class="form-group">
                            <label>Restaurant</label>
                            <select id="restaurant">
                                <option value="">S√©lectionner...</option>
                                ${restaurants.map(r => `<option value="${r}" ${state.restaurant === r ? 'selected' : ''}>${r}</option>`).join('')}
                            </select>
                        </div>
                    </div>

                    <div class="quiz-size">
                        <label>Nombre de questions pour le quiz</label>
                        <div class="size-options">
                            ${[5, 10, 15, 20].map(size => `
                                <button class="size-btn ${state.quizSize === size ? 'active' : ''}" onclick="setQuizSize(${size})">${size}</button>
                            `).join('')}
                        </div>
                        <p class="text-small" style="margin-top: 10px;">Banque actuelle : ${questions.length} questions</p>
                    </div>

                    <button class="btn btn-primary" onclick="startQuiz()">üé≤ G√©n√©rer un Quiz Al√©atoire</button>
                </div>

                <div class="grid">
                    <div class="icon-card" onclick="state.view='history'; render();">
                        <div class="icon">üìä</div>
                        <h3>Historique</h3>
                        <p class="text-small">${state.history.length} quiz r√©alis√©s</p>
                    </div>
                    <div class="icon-card" onclick="exportData()">
                        <div class="icon">üíæ</div>
                        <h3>Sauvegarder</h3>
                        <p class="text-small">Export JSON</p>
                    </div>
                </div>
            `;
        }

        function renderQuiz() {
            const q = state.currentQuiz[state.currentQuestion];
            const progress = ((state.currentQuestion + 1) / state.currentQuiz.length) * 100;
            
            return `
                <div class="card">
                    <div class="flex-between" style="margin-bottom: 15px;">
                        <span style="font-weight: 600; color: #6b7280;">Question ${state.currentQuestion + 1} / ${state.currentQuiz.length}</span>
                        <span style="font-weight: 600; color: #f97316;">${state.employeeName}</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                    
                    <h2>${q.question}</h2>
                    
                    <div>
                        ${q.options.map((opt, idx) => `
                            <button class="option-btn" onclick="answerQuestion('${opt.replace(/'/g, "\\'")}')">
                                <span class="option-letter">${String.fromCharCode(65 + idx)}</span>
                                ${opt}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
        }

        function renderResults() {
            const r = state.results;
            const icon = r.percentage >= 80 ? '‚úÖ' : r.percentage >= 60 ? '‚ö†Ô∏è' : '‚ùå';
            
            return `
                <div class="card">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <div style="font-size: 5em; margin-bottom: 20px;">${icon}</div>
                        <h1 style="margin-bottom: 10px;">R√©sultats du Quiz</h1>
                        <p style="color: #6b7280; font-size: 1.1em;">${r.employeeName} - ${r.restaurant}</p>
                        <p class="text-small">${r.date}</p>
                    </div>

                    <div class="score-display">
                        <div class="score-number">${r.percentage}%</div>
                        <div style="font-size: 1.3em;">${r.score} / ${r.total} bonnes r√©ponses</div>
                    </div>

                    <div style="max-height: 400px; overflow-y: auto; margin-bottom: 20px;">
                        ${r.details.map(d => `
                            <div class="result-card ${d.isCorrect ? 'correct' : 'wrong'}">
                                <div style="display: flex; gap: 15px;">
                                    <div style="font-size: 1.5em;">${d.isCorrect ? '‚úÖ' : '‚ùå'}</div>
                                    <div style="flex: 1;">
                                        <p style="font-weight: 600; margin-bottom: 8px;">${d.question}</p>
                                        <p class="text-small">R√©ponse donn√©e : ${d.userAnswer}</p>
                                        ${!d.isCorrect ? `<p class="text-success" style="margin-top: 5px;">Bonne r√©ponse : ${d.correctAnswer}</p>` : ''}
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>

                    <div class="grid">
                        <button class="btn btn-primary" onclick="resetQuiz()">Nouveau Quiz</button>
                        <button class="btn btn-secondary" onclick="state.view='history'; render();">Voir l'Historique</button>
                    </div>
                </div>
            `;
        }

        function renderHistory() {
            return `
                <div class="card">
                    <div class="flex-between" style="margin-bottom: 20px;">
                        <h2>Historique des Quiz (${state.history.length})</h2>
                        <button class="btn btn-secondary btn-small" onclick="state.view='home'; render();">Retour</button>
                    </div>

                    ${state.history.length === 0 ? 
                        '<p style="text-align: center; color: #6b7280; padding: 40px;">Aucun quiz r√©alis√©</p>' :
                        state.history.map(h => `
                            <div class="question-item">
                                <div class="flex-between">
                                    <div>
                                        <h3>${h.employeeName}</h3>
                                        <p class="text-small">${h.restaurant} - ${h.date}</p>
                                        <p class="text-small" style="margin-top: 5px;">${h.score} / ${h.total} r√©ponses correctes</p>
                                    </div>
                                    <div style="font-size: 2em; font-weight: bold; color: ${h.percentage >= 80 ? '#10b981' : h.percentage >= 60 ? '#f59e0b' : '#ef4444'};">
                                        ${h.percentage}%
                                    </div>
                                </div>
                            </div>
                        `).join('')
                    }
                </div>
            `;
        }

        function setQuizSize(size) {
            state.quizSize = size;
            render();
        }

        function startQuiz() {
            state.employeeName = document.getElementById('employeeName').value;
            state.restaurant = document.getElementById('restaurant').value;

            if (!state.employeeName || !state.restaurant) {
                alert('Veuillez renseigner le nom et le restaurant');
                return;
            }

            const shuffled = [...questions].sort(() => Math.random() - 0.5);
            state.currentQuiz = shuffled.slice(0, state.quizSize);
            state.currentQuestion = 0;
            state.answers = [];
            state.view = 'quiz';
            render();
        }

        function answerQuestion(answer) {
            state.answers.push(answer);
            
            if (state.currentQuestion < state.currentQuiz.length - 1) {
                state.currentQuestion++;
                render();
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            const score = state.answers.filter((ans, idx) => ans === state.currentQuiz[idx].answer).length;
            const percentage = Math.round((score / state.currentQuiz.length) * 100);
            
            state.results = {
                employeeName: state.employeeName,
                restaurant: state.restaurant,
                date: new Date().toLocaleString('fr-BE'),
                score,
                total: state.currentQuiz.length,
                percentage,
                details: state.currentQuiz.map((q, idx) => ({
                    question: q.question,
                    userAnswer: state.answers[idx],
                    correctAnswer: q.answer,
                    isCorrect: state.answers[idx] === q.answer
                }))
            };
            
            state.history.unshift(state.results);
            localStorage.setItem('otacos-history', JSON.stringify(state.history));
            state.view = 'results';
            render();
        }

        function resetQuiz() {
            state.view = 'home';
            state.employeeName = '';
            state.restaurant = '';
            render();
        }

        function exportData() {
            const data = { questions, history: state.history };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'otacos-quiz-backup.json';
            a.click();
        }

        render();
    </script>
</body>
</html>
